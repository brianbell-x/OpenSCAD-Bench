{
  "id": "gen-1764794646-4a4buJkxn8LncTE5pBBo",
  "model": "deepseek/deepseek-v3.2",
  "choices": [
    {
      "message": {
        "role": "assistant",
        "content": "```openscad\n// Ergonomic Tool Handle Grip\n// Based on cross-section profiles from reference sketch\n\n// Parameters\nhandle_length = 90; // Total length in mm\nsections = 4;       // Number of cross-sections\n\n// Section positions along handle (0 = base, 1 = tip)\nsection_positions = [0, 0.33, 0.66, 1];\n\n// Section A (base): Rounded rectangle\nfunction section_a_profile(t) = [\n    for (angle = [0:5:360])\n        let(\n            // Rounded rectangle: 18x12mm with 3mm corner radius\n            width = 18,\n            height = 12,\n            radius = 3,\n            \n            // Parametric rounded rectangle\n            x_base = angle <= 45 || angle >= 315 ? width/2 - radius :\n                    angle >= 45 && angle <= 135 ? (width/2 - radius) + radius * cos(angle - 45) :\n                    angle >= 135 && angle <= 225 ? -width/2 + radius :\n                    (width/2 - radius) + radius * cos(angle - 225),\n                    \n            y_base = angle <= 45 || angle >= 315 ? (height/2 - radius) + radius * sin(angle) :\n                    angle >= 45 && angle <= 135 ? height/2 - radius :\n                    angle >= 135 && angle <= 225 ? (height/2 - radius) + radius * sin(angle - 135) :\n                    -height/2 + radius,\n                    \n            // Add slight taper toward tip\n            taper = 0.95\n        )\n        [x_base * taper, y_base * taper]\n];\n\n// Section B: Elliptical shape\nfunction section_b_profile(t) = [\n    for (angle = [0:5:360])\n        let(\n            // Ellipse: 16mm major axis, 14mm minor axis\n            a = 8,  // Semi-major axis\n            b = 7,  // Semi-minor axis\n            \n            // Rotate ellipse for ergonomic grip\n            rot_angle = 15,\n            x = a * cos(angle),\n            y = b * sin(angle),\n            \n            // Rotated coordinates\n            x_rot = x * cos(rot_angle) - y * sin(rot_angle),\n            y_rot = x * sin(rot_angle) + y * cos(rot_angle)\n        )\n        [x_rot, y_rot]\n];\n\n// Section C: Circle with asymmetric thumb rest bump\nfunction section_c_profile(t) = [\n    for (angle = [0:5:360])\n        let(\n            // Base circle: 14mm diameter\n            radius = 7,\n            \n            // Thumb rest parameters\n            thumb_angle = 45,    // Position of thumb rest (degrees from top)\n            thumb_width = 30,    // Angular width of thumb rest\n            thumb_bump = 3,      // Height of thumb bump\n            \n            // Calculate distance from thumb rest center\n            angle_diff = min(\n                abs(angle - thumb_angle),\n                abs(angle - thumb_angle + 360),\n                abs(angle - thumb_angle - 360)\n            ),\n            \n            // Apply thumb rest bump if within thumb rest region\n            bump_factor = angle_diff < thumb_width/2 ? \n                thumb_bump * cos(180 * angle_diff / thumb_width) : 0,\n            \n            // Final radius with thumb bump\n            final_radius = radius + bump_factor,\n            \n            // Convert to Cartesian coordinates\n            x = final_radius * cos(angle),\n            y = final_radius * sin(angle)\n        )\n        [x, y]\n];\n\n// Section D (tip): Simple circle\nfunction section_d_profile(t) = [\n    for (angle = [0:5:360])\n        let(\n            // Tapered circle: 10mm diameter\n            radius = 5,\n            x = radius * cos(angle),\n            y = radius * sin(angle)\n        )\n        [x, y]\n];\n\n// Get profile for a specific section\nfunction get_profile(section, t) = \n    section == 0 ? section_a_profile(t) :\n    section == 1 ? section_b_profile(t) :\n    section == 2 ? section_c_profile(t) :\n    section_d_profile(t);\n\n// Create a single cross-section slice\nmodule cross_section_slice(section_idx, z_pos) {\n    profile = get_profile(section_idx, section_positions[section_idx]);\n    \n    // Create polygon from profile points\n    linear_extrude(height = 0.1, center = true) {\n        polygon(points = profile);\n    }\n    \n    // Add positioning\n    translate([0, 0, z_pos]) {\n        linear_extrude(height = 0.1, center = true) {\n            polygon(points = profile);\n        }\n    }\n}\n\n// Create smooth handle using hull between slices\nmodule ergonomic_handle() {\n    // Number of intermediate slices for smooth transition\n    slices = 20;\n    \n    // Create hull between consecutive slices\n    for (i = [0:slices-1]) {\n        hull() {\n            // Current slice position\n            t1 = i / slices;\n            z1 = t1 * handle_length;\n            \n            // Next slice position\n            t2 = (i + 1) / slices;\n            z2 = t2 * handle_length;\n            \n            // Determine which sections to interpolate between\n            section1 = floor(t1 * (sections - 1));\n            section2 = floor(t2 * (sections - 1));\n            \n            // Local interpolation parameter within section transition\n            local_t1 = (t1 - section_positions[section1]) / \n                      (section_positions[section1+1] - section_positions[section1]);\n            local_t2 = (t2 - section_positions[section2]) / \n                      (section_positions[section2+1] - section_positions[section2]);\n            \n            // Create interpolated profiles\n            profile1 = interpolate_profile(\n                get_profile(section1, local_t1),\n                get_profile(section1+1, local_t1),\n                local_t1\n            );\n            \n            profile2 = interpolate_profile(\n                get_profile(section2, local_t2),\n                get_profile(section2+1, local_t2),\n                local_t2\n            );\n            \n            // Create slices at both positions\n            translate([0, 0, z1]) {\n                linear_extrude(height = 0.1, center = true) {\n                    polygon(points = profile1);\n                }\n            }\n            \n            translate([0, 0, z2]) {\n                linear_extrude(height = 0.1, center = true) {\n                    polygon(points = profile2);\n                }\n            }\n        }\n    }\n}\n\n// Interpolate between two profiles\nfunction interpolate_profile(profile1, profile2, t) = [\n    for (i = [0:len(profile1)-1])\n        [\n            profile1[i].x * (1-t) + profile2[i].x * t,\n            profile1[i].y * (1-t) + profile2[i].y * t\n        ]\n];\n\n// Create mounting base for tool attachment\nmodule mounting_base() {\n    translate([0, 0, -5]) {\n        cylinder(h = 5, r = 10, $fn = 60);\n        \n        // Hexagonal anti-rotation feature\n        translate([0, 0, -3]) {\n            cylinder(h = 3, r = 8, $fn = 6);\n        }\n        \n        // Mounting hole\n        translate([0, 0, -8]) {\n            cylinder(h = 8, r = 4, $fn = 30);\n        }\n    }\n}\n\n// Main assembly\nunion() {\n    // Ergonomic handle\n    ergonomic_handle();\n    \n    // Mounting base\n    mounting_base();\n    \n    // Add fillet at base transition\n    translate([0, 0, 0]) {\n        rotate_extrude($fn = 60) {\n            translate([10, 0, 0]) {\n                circle(r = 2, $fn = 30);\n            }\n        }\n    }\n}\n\n// Add orientation indicator for thumb rest\ncolor(\"red\") {\n    translate([0, 10, handle_length * 0.66]) {\n        rotate([90, 0, 0]) {\n            cylinder(h = 1, r = 1, $fn = 20);\n        }\n    }\n}\n```"
      },
      "finish_reason": "stop"
    }
  ]
}